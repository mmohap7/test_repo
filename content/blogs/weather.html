---
title: "WEATHER ANALYSIS"
output: html_document
slug: weather
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<div id="exploring-nasa-weather-dataset" class="section level2">
<h2>EXPLORING NASA WEATHER DATASET</h2>
<pre class="r"><code>library(kableExtra)</code></pre>
<pre><code>## 
## Attaching package: &#39;kableExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     group_rows</code></pre>
<pre class="r"><code>weather_select &lt;- weather %&gt;% 
  select(Year:Dec)

tidyweather &lt;- weather_select %&gt;% 
  pivot_longer(
    names_to = &quot;Month&quot;,
    values_to = &quot;delta&quot;,
    cols = -Year
  )

head(tidyweather, 20) %&gt;% 
  kbl() %&gt;%
  kable_paper(&quot;hover&quot;, full_width = F)</code></pre>
<table class=" lightable-paper lightable-hover" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<thead>
<tr>
<th style="text-align:right;">
Year
</th>
<th style="text-align:left;">
Month
</th>
<th style="text-align:right;">
delta
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Jan
</td>
<td style="text-align:right;">
-0.54
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Feb
</td>
<td style="text-align:right;">
-0.38
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Mar
</td>
<td style="text-align:right;">
-0.26
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Apr
</td>
<td style="text-align:right;">
-0.37
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
May
</td>
<td style="text-align:right;">
-0.11
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Jun
</td>
<td style="text-align:right;">
-0.22
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Jul
</td>
<td style="text-align:right;">
-0.23
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Aug
</td>
<td style="text-align:right;">
-0.24
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Sep
</td>
<td style="text-align:right;">
-0.26
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Oct
</td>
<td style="text-align:right;">
-0.32
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Nov
</td>
<td style="text-align:right;">
-0.37
</td>
</tr>
<tr>
<td style="text-align:right;">
1880
</td>
<td style="text-align:left;">
Dec
</td>
<td style="text-align:right;">
-0.48
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Jan
</td>
<td style="text-align:right;">
-0.19
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Feb
</td>
<td style="text-align:right;">
-0.25
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Mar
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Apr
</td>
<td style="text-align:right;">
-0.02
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
May
</td>
<td style="text-align:right;">
-0.06
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Jun
</td>
<td style="text-align:right;">
-0.36
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Jul
</td>
<td style="text-align:right;">
-0.06
</td>
</tr>
<tr>
<td style="text-align:right;">
1881
</td>
<td style="text-align:left;">
Aug
</td>
<td style="text-align:right;">
-0.03
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>library(lubridate)
tidyweather &lt;- tidyweather %&gt;%
  mutate(date = ymd(paste(as.character(Year), Month, &quot;1&quot;)),
         month = month(date, label=TRUE),
         year = year(date))

tidyweather_plot &lt;- ggplot(tidyweather, aes(x=date, y = delta))+
  geom_point()+
  geom_smooth(color=&quot;red&quot;) +
  theme_bw() +
  labs (
    title = &quot;Weather Anomalies&quot;
  )

tidyweather_plot</code></pre>
<p><img src="/blogs/weather_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>tidyweather_plot +
  facet_wrap(~month)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 5 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 5 rows containing missing values (geom_point).</code></pre>
<p><img src="/blogs/weather_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>comparison &lt;- tidyweather %&gt;% 
  filter(Year&gt;= 1881) %&gt;%     #remove years prior to 1881
  #create new variable &#39;interval&#39;, and assign values based on criteria below:
  mutate(interval = case_when(
    Year %in% c(1881:1920) ~ &quot;1881-1920&quot;,
    Year %in% c(1921:1950) ~ &quot;1921-1950&quot;,
    Year %in% c(1951:1980) ~ &quot;1951-1980&quot;,
    Year %in% c(1981:2010) ~ &quot;1981-2010&quot;,
    TRUE ~ &quot;2011-present&quot;
  ))</code></pre>
<pre class="r"><code>ggplot(comparison, aes(x=delta, fill=interval))+
  geom_density(alpha=0.2) +   #density plot with tranparency set to 20%
  theme_bw() +                #theme
  labs (
    title = &quot;Density Plot for Monthly Temperature Anomalies&quot;,
    y     = &quot;Density&quot;         #changing y-axis label to sentence case
  )</code></pre>
<pre><code>## Warning: Removed 5 rows containing non-finite values (stat_density).</code></pre>
<p><img src="/blogs/weather_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>#creating yearly averages
average_annual_anomaly &lt;- tidyweather %&gt;% 
  group_by(Year) %&gt;%   #grouping data by Year
  
  # creating summaries for mean delta 
  # use `na.rm=TRUE` to eliminate NA (not available) values 
  summarise(annual_average_delta = mean(delta, na.rm=TRUE)) </code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre class="r"><code>#plotting the data:
ggplot(average_annual_anomaly, aes(x=Year, y= annual_average_delta))+
  geom_point()+
  
  #Fit the best fit line, using LOESS method
  geom_smooth() +
  
  #change to theme_bw() to have white background + black frame around plot
  theme_bw() +
  labs (
    title = &quot;Average Yearly Anomaly&quot;,
    y     = &quot;Average Annual Delta&quot;
  )                         </code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/blogs/weather_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
